<div
  class="mrx-input-textarea"
  [class]="getClasses"
  [class.mrx-input-error]="invalid"
>
  <div class="mrx-input-textarea__wrapper">
    <textarea
      #inputElement
      *ngIf="!isShowBlock; else disabledTemplate"
      mrxAutosize
      [id]="uuid"
      [ngModel]="value"
      [disabled]="disabled"
      [readonly]="readonly"
      [rows]="rows"
      [autosize]="autosize"
      [attr.minlength]="minlength > 0 ? minlength : null"
      [attr.maxlength]="maxlength > 0 ? maxlength : null"
      [attr.placeholder]="!disabled && placeholder ? placeholder : ''"
      (ngModelChange)="updateValue($event)"
      (blur)="blurUpdateValue()"
    ></textarea>

    <ng-template #disabledTemplate>
      <div
        class="mrx-input-textarea__disabled-block"
        [class.-disabled]="disabled"
        [class.-readonly]="readonly"
        [innerHtml]="isShowBlock ? innerHtml : ''"
      ></div>
    </ng-template>

    <mrx-chars-left
      *ngIf="!disabled && maxlength"
      [value]="value"
      [maxlength]="maxlength">
    </mrx-chars-left>

    <mrx-save-state [id]="uuid" [fields]="fields"></mrx-save-state>
  </div>

  <mrx-error-message
    *ngIf="(!isValid || invalid) && isInvalidMessage"
    [invalidMessage]="invalidMessage"
  ></mrx-error-message>
</div>
